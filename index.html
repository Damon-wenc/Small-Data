<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Small-data by Damon-wenc</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Small-data</h1>
      <h2 class="project-tagline">Some data analysis tools for websites</h2>
      <a href="https://github.com/Damon-wenc/Small-Data" class="btn">View on GitHub</a>
      <a href="https://github.com/Damon-wenc/Small-Data/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Damon-wenc/Small-Data/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="small-data" class="anchor" href="#small-data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Small-Data</h1>

<p>In honor of <strong>big data</strong> :D</p>

<p>I've just got some 'small data' here. There are several small programs about getting, parsing and analysing info on some websites. As most cases are Chinese sites, I'll describe my ideas in Chinese~ You may read my code for more information ~(≧▽≦)/~</p>

<h2>
<a id="说明" class="anchor" href="#%E8%AF%B4%E6%98%8E" aria-hidden="true"><span class="octicon octicon-link"></span></a>说明</h2>

<p>验证版本: Python V2.7.6</p>

<p>以下的只是简单的几个Python程序, 用以收集一些网站上不严谨的信息, 仅做参考~</p>

<h3>
<a id="1-movie_yearspy" class="anchor" href="#1-movie_yearspy" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. movie_years.py</h3>

<p>这个是我从<a href="http://movie.douban.com/top250?start=0&amp;filter=&amp;type=">豆瓣电影TOP250</a>系列直接抓取下来的, 目的是想查看一下伟大电影的诞生与经济大小年是否有对应关系. 当然这个实现方法明显是不合理的, 一是我的样品库太小了, 二是好多好电影, 特别是近年的, 或许需要时间及机缘才会被社会所接纳对吧(例如大话西游), 所以这里只是仅供一个构思, 主要是练习一下Python对网页的抓取.</p>

<p>下面是一小段Python输出</p>

<blockquote>
<p>......</p>

<p>year 1994 has 12 great moives</p>

<p>year 1995 has 7 great moives</p>

<p>year 1996 has 4 great moives</p>

<p>year 1997 has 5 great moives</p>

<p>year 1998 has 11 great moives</p>

<p>......</p>
</blockquote>

<p>结果也正是说明这不靠谱╮(╯▽╰)╭, 或许可以换个思路? or 再改善下?</p>

<p>详情请自行阅读及运行movie_years.py</p>

<h3>
<a id="2tecent_sng_skillspy" class="anchor" href="#2tecent_sng_skillspy" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.tecent_sng_skills.py</h3>

<p>这个.. 是想找出腾讯SNG部后台招聘所需要哪些技能, 期待针对性学习一下吧。程序通过遍历所有<a href="http://hr.tencent.com/position.php?keywords=SNG+%E5%90%8E%E5%8F%B0&amp;lid=2218&amp;tid=0">SNG+深圳+后台</a>招聘网页, 对其中skills_array数组中的关键字（最偷懒且不严谨的做法）进行热度记录, 最后按照热度从低到高的顺序排列出来,.提高匹配度咯。</p>

<p>下面是一小段Python输出</p>

<blockquote>
<p>......</p>

<p>skill: 大容量网络             heat [9]</p>

<p>skill: tcp/ip          heat [10]</p>

<p>skill: 数据结构            heat [11]</p>

<p>skill: 网络安全            heat [11]</p>

<p>skill: c/c++           heat [21]</p>

<p>......</p>
</blockquote>

<p>预知详情如何, 还请亲自运行程序及查看源码</p>

<h3>
<a id="3爬取一个电影网站感谢小电影天堂的高清资源" class="anchor" href="#3%E7%88%AC%E5%8F%96%E4%B8%80%E4%B8%AA%E7%94%B5%E5%BD%B1%E7%BD%91%E7%AB%99%E6%84%9F%E8%B0%A2%E5%B0%8F%E7%94%B5%E5%BD%B1%E5%A4%A9%E5%A0%82%E7%9A%84%E9%AB%98%E6%B8%85%E8%B5%84%E6%BA%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.爬取一个电影网站（感谢<a href="http://www.xdytt.com">小电影天堂</a>)的高清资源</h3>

<p>想看好电影，新的电影可以尽可能地在影院观看，贡献票房，老的经典大片就只有在网上，咳咳，搜一下资源了。发现一个很好的网站：<a href="http://www.xdytt.com">小电影天堂</a>，真心希望它能持久并坚挺，不过它的同行倒是已经有数不清的先烈牺牲了。所以这里打算利用下Python的爬虫，保存一部分电影资源下来，以备后用。</p>

<p>采用的且基于技术主要有:</p>

<ol>
<li>Python 2.7.10(MacOS X 默认)</li>
<li>lxml.html 及 xpath</li>
<li>gevent 及 pool</li>
</ol>

<p>由于之前熟悉的是re正则表达式及多线程/进程方式，这次想用不同的技术尝试一下，决定从<a href="http://www.zhihu.com/question/24590883">知乎</a>的讨论中挑选gevent作高效率的协程，lxml来爬取数据。事实证明确实不错，效率嘛.. 在熟悉了之后是挺高的，就是这学习曲线有点陡，没入门前环境配置、字体编码、文档、博客都是花了不少时间啃的，不过入门后还挺好，效率的确高。</p>

<p>需要注意的点有：</p>

<ol>
<li>因为是爬别人的网站，所以要注意好心人可能是建站按流量走的，所以尽量不要反复无意义的去爬网页，且爬的时候控制下速度，别丧心病狂地开多线程... 要做到良心限速</li>
<li>可能是网速限制，或者是网站限制连接数，发现在用gevent爬网页在同时“线程数”比较多的时候，会报gevent的诡异的错误。由于spawn没有连接数限制，所以切换到Pool，来限制下连接数。在家里测试6M网络最多开40路同时就能跑满。</li>
<li>同时在打开网页调用urllib2时也要相应的增加超时时间，协程多了相对有点慢。</li>
</ol>

<p>随脚本一起上传了结果文档：movie_info.html，发现速度还不错，从3000多个链接爬675个6.0分以上的1080P电影下来一共花费10分钟多一点，蹲个坑就搞定了... 而且是在限速了的情况下。攒着慢慢看 XD</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Damon-wenc/Small-Data">Small-data</a> is maintained by <a href="https://github.com/Damon-wenc">Damon-wenc</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
